var Modal=function(t,e){this.options=e,this.$element=$(t),this.$backdrop=this.isShown=null,this.options.remote&&this.$element.find(".modal-content").load(this.options.remote,$.proxy(function(){this.$element.trigger("loaded.bs.modal")},this))};Modal.DEFAULTS={backdrop:!0,keyboard:!0,show:!0},Modal.prototype.toggle=function(t){return this[this.isShown?"hide":"show"](t)},Modal.prototype.show=function(t){var e=this,o=$.Event("show.bs.modal",{relatedTarget:t});this.$element.trigger(o),this.isShown||o.isDefaultPrevented()||(this.isShown=!0,this.escape(),this.$element.on("click.dismiss.bs.modal",'[data-dismiss="modal"]',$.proxy(this.hide,this)),this.backdrop(function(){var o=$.support.transition&&e.$element.hasClass("fade");e.$element.parent().length||e.$element.appendTo(document.body),e.$element.show().scrollTop(0),o&&e.$element[0].offsetWidth,e.$element.addClass("in").attr("aria-hidden",!1),e.enforceFocus();var s=$.Event("shown.bs.modal",{relatedTarget:t});o?e.$element.find(".modal-dialog").one($.support.transition.end,function(){e.$element.focus().trigger(s)}).emulateTransitionEnd(300):e.$element.focus().trigger(s)}))},Modal.prototype.hide=function(t){t&&t.preventDefault(),t=$.Event("hide.bs.modal"),this.$element.trigger(t),this.isShown&&!t.isDefaultPrevented()&&(this.isShown=!1,this.escape(),$(document).off("focusin.bs.modal"),this.$element.removeClass("in").attr("aria-hidden",!0).off("click.dismiss.bs.modal"),$.support.transition&&this.$element.hasClass("fade")?this.$element.one($.support.transition.end,$.proxy(this.hideModal,this)).emulateTransitionEnd(300):this.hideModal())},Modal.prototype.enforceFocus=function(){$(document).off("focusin.bs.modal").on("focusin.bs.modal",$.proxy(function(t){this.$element[0]===t.target||this.$element.has(t.target).length||this.$element.focus()},this))},Modal.prototype.escape=function(){this.isShown&&this.options.keyboard?this.$element.on("keyup.dismiss.bs.modal",$.proxy(function(t){27==t.which&&this.hide()},this)):this.isShown||this.$element.off("keyup.dismiss.bs.modal")},Modal.prototype.hideModal=function(){var t=this;this.$element.hide(),this.backdrop(function(){t.removeBackdrop(),t.$element.trigger("hidden.bs.modal")})},Modal.prototype.removeBackdrop=function(){this.$backdrop&&this.$backdrop.remove(),this.$backdrop=null},Modal.prototype.backdrop=function(t){var e=this.$element.hasClass("fade")?"fade":"";if(this.isShown&&this.options.backdrop){var o=$.support.transition&&e;if(this.$backdrop=$('<div class="modal-backdrop '+e+'" />').appendTo(document.body),this.$element.on("click.dismiss.bs.modal",$.proxy(function(t){t.target===t.currentTarget&&("static"==this.options.backdrop?this.$element[0].focus.call(this.$element[0]):this.hide.call(this))},this)),o&&this.$backdrop[0].offsetWidth,this.$backdrop.addClass("in"),!t)return;o?this.$backdrop.one($.support.transition.end,t).emulateTransitionEnd(150):t()}else!this.isShown&&this.$backdrop?(this.$backdrop.removeClass("in"),$.support.transition&&this.$element.hasClass("fade")?this.$backdrop.one($.support.transition.end,t).emulateTransitionEnd(150):t()):t&&t()};var old=$.fn.modal;$.fn.modal=function(t,e){return this.each(function(){var o=$(this),s=o.data("bs.modal"),i=$.extend({},Modal.DEFAULTS,o.data(),"object"==typeof t&&t);s||o.data("bs.modal",s=new Modal(this,i)),"string"==typeof t?s[t](e):i.show&&s.show(e)})},$.fn.modal.Constructor=Modal,$.fn.modal.noConflict=function(){return $.fn.modal=old,this},$(document.body).on("click.bs.modal.data-api",'[data-toggle="modal"]',function(t){var e=$(this),o=e.attr("href"),s=$(e.attr("data-target")||o&&o.replace(/.*(?=#[^\s]+$)/,"")),i=s.data("bs.modal")?"toggle":$.extend({remote:!/#/.test(o)&&o},s.data(),e.data());e.is("a")&&t.preventDefault(),s.modal(i,this).one("hide",function(){e.is(":visible")&&e.focus()})}),$(document.body).on("show.bs.modal",".modal",function(){$(document.body).addClass("modal-open")}).on("hidden.bs.modal",".modal",function(){$(document.body).removeClass("modal-open")});